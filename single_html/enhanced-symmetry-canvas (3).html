<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CircuitCanvas Pro - Advanced Design Studio</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --bg-color: #0f1729;
      --panel-color: #131c33;
      --accent-color: #4361ee;
      --accent-color-alt: #3b82f6;
      --text-color: #f3f4f6;
      --secondary-text: #b2b2b2;
      --border-color: #2c3e50;
      --tool-hover: #2a3656;
      --tool-active: #4361ee;
      --grid-color: rgba(65, 90, 150, 0.1);
      --success-color: #10b981;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background: var(--bg-color);
      color: var(--text-color);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }
    
    .app-container {
      display: flex;
      flex: 1;
      height: calc(100vh - 40px);
      overflow: hidden;
      animation: fadeIn 0.5s ease-out;
    }
    
    .left-panel {
      display: flex;
      flex-direction: column;
      width: 70px;
      transition: width 0.3s ease;
    }
    
    .left-panel.expanded {
      width: 250px;
    }
    
    .toolbar {
      background-color: var(--panel-color);
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px 0;
      border-right: 1px solid var(--border-color);
      flex: 1;
      overflow-y: auto;
    }
    
    .tool-btn {
      width: 50px;
      height: 50px;
      border-radius: 10px;
      border: none;
      background: transparent;
      color: var(--text-color);
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 18px;
      position: relative;
    }
    
    .tool-btn:hover {
      background: var(--tool-hover);
      transform: translateY(-2px);
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    }
    
    .tool-btn.active {
      background: var(--tool-active);
      color: white;
      box-shadow: 0 4px 12px rgba(67, 97, 238, 0.3);
    }
    
    .tool-btn.pro::after {
      content: "PRO";
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--accent-color-alt);
      color: white;
      font-size: 8px;
      font-weight: bold;
      padding: 2px 4px;
      border-radius: 4px;
    }
    
    .tool-separator {
      width: 40px;
      height: 1px;
      background: var(--border-color);
      margin: 15px 0;
    }
    
    .tool-group-title {
      width: 100%;
      text-align: center;
      font-size: 11px;
      text-transform: uppercase;
      color: var(--secondary-text);
      margin: 5px 0 10px 0;
      letter-spacing: 1px;
      display: none;
    }
    
    .left-panel.expanded .tool-group-title {
      display: block;
    }
    
    .main-area {
      flex: 1;
      display: flex;
      position: relative;
    }
    
    .canvas-container {
      flex: 1;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      background-color: var(--bg-color);
    }
    
    .canvas-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }
    
    .grid-pattern {
      width: 100%;
      height: 100%;
      background-image: 
        linear-gradient(var(--grid-color) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
      background-size: 20px 20px;
      transition: background-size 0.3s ease;
    }
    
    .dots-pattern {
      width: 100%;
      height: 100%;
      background-image: radial-gradient(circle, var(--grid-color) 1px, transparent 1px);
      background-size: 20px 20px;
      transition: background-size 0.3s ease;
    }
    
    .rulers {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 5;
    }
    
    .ruler-h, .ruler-v {
      position: absolute;
      background: rgba(30, 40, 60, 0.8);
    }
    
    .ruler-h {
      top: 0;
      left: 0;
      right: 0;
      height: 20px;
    }
    
    .ruler-v {
      top: 0;
      left: 0;
      bottom: 0;
      width: 20px;
    }
    
    .ruler-corner {
      position: absolute;
      top: 0;
      left: 0;
      width: 20px;
      height: 20px;
      background: rgba(40, 50, 70, 0.9);
      z-index: 6;
    }
    
    .ruler-h-marks, .ruler-v-marks {
      position: absolute;
      color: rgba(255, 255, 255, 0.7);
      font-size: 9px;
    }
    
    .ruler-h-marks {
      top: 3px;
    }
    
    .ruler-v-marks {
      left: 3px;
      writing-mode: vertical-lr;
      transform: rotate(180deg);
    }
    
    .canvas-wrapper {
      position: relative;
      z-index: 1;
    }
    
    #canvas {
      background: white;
      box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
      cursor: crosshair;
      transition: transform 0.3s ease;
    }
    
    .canvas-overlay {
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 10;
    }
    
    .settings-panel {
      width: 320px;
      background: var(--panel-color);
      border-left: 1px solid var(--border-color);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    
    .settings-tabs {
      display: flex;
      background: rgba(0, 0, 0, 0.2);
      border-bottom: 1px solid var(--border-color);
    }
    
    .settings-tab {
      padding: 12px 15px;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      cursor: pointer;
      flex: 1;
      text-align: center;
      transition: all 0.2s;
      border-bottom: 2px solid transparent;
      color: var(--secondary-text);
    }
    
    .settings-tab:hover {
      background: rgba(0, 0, 0, 0.1);
      color: var(--text-color);
    }
    
    .settings-tab.active {
      color: var(--accent-color);
      border-bottom-color: var(--accent-color);
      background: rgba(67, 97, 238, 0.1);
    }
    
    .settings-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .panel-section {
      margin-bottom: 25px;
      animation: fadeIn 0.3s ease-out;
    }
    
    .panel-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 15px;
      color: var(--text-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .panel-title i {
      margin-right: 8px;
      color: var(--accent-color);
    }
    
    .panel-subtitle {
      font-size: 13px;
      color: var(--secondary-text);
      margin: -10px 0 15px 24px;
    }
    
    .panel-actions {
      display: flex;
      gap: 8px;
    }
    
    .panel-collapse-btn {
      background: transparent;
      border: none;
      color: var(--secondary-text);
      cursor: pointer;
      font-size: 14px;
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
    }
    
    .panel-collapse-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-color);
    }
    
    .control-group {
      margin-bottom: 15px;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      font-size: 14px;
      color: var(--secondary-text);
    }
    
    input[type="range"] {
      width: 100%;
      height: 6px;
      -webkit-appearance: none;
      background: #2d3748;
      border-radius: 3px;
      outline: none;
    }
    
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--accent-color);
      cursor: pointer;
    }
    
    input[type="number"] {
      width: 60px;
      background: #2d3748;
      border: none;
      color: white;
      padding: 5px;
      border-radius: 4px;
      text-align: center;
    }
    
    select {
      width: 100%;
      padding: 8px 10px;
      background: #2d3748;
      border: none;
      color: white;
      border-radius: 4px;
      outline: none;
      cursor: pointer;
    }
    
    .checkbox-wrapper {
      display: flex;
      align-items: center;
    }
    
    .checkbox-wrapper label {
      margin: 0 0 0 8px;
    }
    
    .color-picker {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 10px;
    }
    
    .color-option {
      width: 30px;
      height: 30px;
      border-radius: 4px;
      cursor: pointer;
      border: 2px solid transparent;
      transition: transform 0.2s;
    }
    
    .color-option:hover {
      transform: scale(1.1);
    }
    
    .color-option.active {
      border-color: white;
      transform: scale(1.1);
    }
    
    .custom-color {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    input[type="color"] {
      -webkit-appearance: none;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 4px;
      cursor: pointer;
    }
    
    input[type="color"]::-webkit-color-swatch-wrapper {
      padding: 0;
    }
    
    input[type="color"]::-webkit-color-swatch {
      border: none;
      border-radius: 4px;
    }
    
    .symmetry-types {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .symmetry-type {
      flex: 1;
      text-align: center;
      padding: 8px;
      background: #2d3748;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 12px;
    }
    
    .symmetry-type:hover {
      background: var(--tool-hover);
    }
    
    .symmetry-type.active {
      background: var(--tool-active);
      color: white;
    }
    
    .btn {
      background: var(--accent-color);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
    }
    
    .btn:hover {
      background: #3050db;
    }
    
    .btn-group {
      display: flex;
      gap: 8px;
    }
    
    .btn-secondary {
      background: #2d3748;
    }
    
    .btn-secondary:hover {
      background: #3b485e;
    }
    
    .footer {
      height: 40px;
      background: var(--panel-color);
      border-top: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      padding: 0 20px;
      justify-content: space-between;
      font-size: 13px;
    }
    
    .canvas-info {
      color: var(--secondary-text);
    }
    
    .history-buttons {
      display: flex;
      gap: 15px;
    }
    
    .history-btn {
      background: transparent;
      border: none;
      color: var(--text-color);
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.2s;
      font-size: 16px;
    }
    
    .history-btn:hover {
      opacity: 1;
    }
    
    .history-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }
    
    .opacity-control {
      width: 100%;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    
    .opacity-control input[type="range"] {
      flex: 1;
    }
    
    .opacity-value {
      width: 40px;
      text-align: center;
    }
    
    .brush-preview {
      width: 50px;
      height: 50px;
      border-radius: 4px;
      background: #2d3748;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-left: 10px;
    }
    
    .brush-dot {
      background: white;
      border-radius: 50%;
    }
    
    .gradient-section {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .gradient-control {
      display: flex;
      gap: 10px;
    }
    
    .gradient-color {
      flex: 1;
    }
    
    .download-options {
      display: flex;
      gap: 10px;
    }
    
    .tooltip {
      position: relative;
    }

    .tooltip::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 110%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s;
    }

    .tooltip:hover::after {
      opacity: 1;
    }

    .stroke-preview {
      height: 30px;
      background: #2d3748;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 10px;
    }

    .stroke-line {
      background: white;
      height: 2px;
    }

    .pattern-options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .pattern-option {
      width: 40px;
      height: 40px;
      border-radius: 4px;
      background: #2d3748;
      border: 2px solid transparent;
      cursor: pointer;
      overflow: hidden;
    }

    .pattern-option.active {
      border-color: white;
    }

    .pattern-dots {
      background-image: radial-gradient(circle, white 2px, transparent 2px);
      background-size: 10px 10px;
      width: 100%;
      height: 100%;
    }

    .pattern-lines {
      background-image: linear-gradient(to right, white 1px, transparent 1px);
      background-size: 5px;
      width: 100%;
      height: 100%;
    }

    .pattern-zigzag {
      position: relative;
    }

    .pattern-zigzag::before {
      content: "";
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: linear-gradient(135deg, white 25%, transparent 25%, transparent 50%, white 50%, white 75%, transparent 75%, transparent);
      background-size: 8px 8px;
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: var(--panel-color);
      padding: 20px;
      border-radius: 8px;
      max-width: 500px;
      width: 90%;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
    }

    .modal-close {
      background: transparent;
      border: none;
      color: var(--text-color);
      font-size: 20px;
      cursor: pointer;
    }

    .modal-body {
      margin-bottom: 20px;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }
    
    .brush-preview-icon {
      width: 40px;
      height: 40px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      margin-bottom: 5px;
    }
    
    .brush-preset-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .brush-preset {
      width: 60px;
      height: 75px;
      background: #2d3748;
      border-radius: 6px;
      border: 2px solid transparent;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
      padding: 5px;
    }
    
    .brush-preset span {
      font-size: 11px;
      text-align: center;
    }
    
    .brush-preset:hover {
      background: var(--tool-hover);
      transform: translateY(-2px);
    }
    
    .brush-preset.active {
      border-color: var(--accent-color);
      background: rgba(67, 97, 238, 0.2);
    }
    
    .layer-properties {
      margin-top: 15px;
      margin-bottom: 15px;
      padding-top: 15px;
      border-top: 1px solid var(--border-color);
    }
    
    .layers-list {
      max-height: 200px;
      overflow-y: auto;
      margin-bottom: 15px;
    }
    
    .layer-item {
      display: flex;
      align-items: center;
      padding: 8px;
      border-radius: 4px;
      margin-bottom: 5px;
      background: rgba(0, 0, 0, 0.2);
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .layer-item:hover {
      background: rgba(0, 0, 0, 0.3);
    }
    
    .layer-item.active {
      background: rgba(67, 97, 238, 0.2);
    }
    
    .layer-visibility {
      width: 24px;
      text-align: center;
    }
    
    .layer-preview {
      width: 20px;
      height: 20px;
      border-radius: 3px;
      margin-right: 8px;
    }
    
    .layer-name {
      flex: 1;
      font-size: 12px;
    }
    
    .layer-options {
      width: 24px;
      text-align: center;
      opacity: 0.6;
    }
    
    .layer-options:hover {
      opacity: 1;
    }
    
    .property-row {
      display: flex;
      margin-bottom: 15px;
      align-items: center;
    }
    
    .property-label {
      width: 40%;
      font-size: 13px;
      color: var(--secondary-text);
    }
    
    .property-value {
      flex: 1;
    }
    
    .template-category {
      margin-bottom: 20px;
    }
    
    .template-category h4 {
      margin: 0 0 10px 0;
      font-size: 14px;
      color: var(--text-color);
      font-weight: 500;
    }
    
    .template-items {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .template-item {
      width: 70px;
      height: 90px;
      background: #2d3748;
      border-radius: 6px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }
    
    .template-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    .template-preview {
      width: 100%;
      height: 70px;
      background-size: 80%;
      background-position: center;
      background-repeat: no-repeat;
      background-color: #1a2035;
    }
    
    .template-name {
      font-size: 10px;
      text-align: center;
      padding: 3px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .pro-badge {
      position: absolute;
      top: 5px;
      right: 5px;
      background: var(--accent-color-alt);
      color: white;
      font-size: 8px;
      font-weight: bold;
      padding: 2px 4px;
      border-radius: 4px;
    }
    
    .toggle-wrapper, .panel-actions {
      margin-bottom: 15px;
    }
    
    .preset-btn, .template-btn, .filter-btn {
      padding: 6px 10px;
      background: #2d3748;
      border: none;
      border-radius: 4px;
      color: var(--text-color);
      cursor: pointer;
      font-size: 12px;
      transition: all 0.2s;
    }
    
    .preset-btn:hover, .template-btn:hover, .filter-btn:hover {
      background: var(--tool-hover);
    }
    
    .preset-btn.active, .template-btn.active, .filter-btn.active {
      background: var(--tool-active);
    }
    
    .canvas-controls {
      position: absolute;
      bottom: 20px;
      right: 20px;
      z-index: 10;
    }
    
    .zoom-controls {
      display: flex;
      align-items: center;
      background: rgba(19, 28, 51, 0.8);
      border-radius: 20px;
      padding: 5px 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    
    .zoom-btn {
      background: transparent;
      border: none;
      color: var(--text-color);
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .zoom-btn:hover {
      background: rgba(255, 255, 255, 0.1);
    }
    
    #zoom-level {
      margin: 0 10px;
      font-size: 14px;
      width: 50px;
      text-align: center;
    }
    
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 40px;
      height: 20px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #2d3748;
      transition: .4s;
      border-radius: 20px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 2px;
      bottom: 2px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: var(--accent-color);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(20px);
    }

    .toggle-wrapper {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .toggle-wrapper label {
      margin: 0;
    }
    
    .pcb-colors {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 10px 0;
    }
    
    @media (max-width: 1200px) {
      .settings-panel {
        width: 300px;
      }
    }
    
    @media (max-width: 900px) {
      .app-container {
        flex-direction: column;
      }
      
      .toolbar {
        width: 100%;
        height: 60px;
        flex-direction: row;
        padding: 0 15px;
        justify-content: center;
        border-right: none;
        border-bottom: 1px solid var(--border-color);
      }
      
      .tool-btn {
        margin: 0 5px;
      }
      
      .tool-separator {
        width: 1px;
        height: 30px;
        margin: 0 8px;
      }
      
      .main-area {
        flex-direction: column;
      }
      
      .settings-panel {
        width: 100%;
        border-left: none;
        border-top: 1px solid var(--border-color);
        max-height: 300px;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <div class="left-panel">
      <div class="toolbar">
        <div class="app-logo" style="margin-bottom: 20px;">
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 24 24' fill='none' stroke='%234361ee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3Cpath d='M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z'%3E%3C/path%3E%3Cpath d='M2 12h20'%3E%3C/path%3E%3C/svg%3E" alt="CircuitCanvas Pro" style="filter: drop-shadow(0 2px 5px rgba(67, 97, 238, 0.5));">
        </div>

        <div class="tool-group-title">Core Tools</div>
        <button class="tool-btn active tooltip" data-tool="pen" data-tooltip="Brush Tool (B)">
          <i class="fas fa-paint-brush"></i>
        </button>
        <button class="tool-btn tooltip" data-tool="line" data-tooltip="Line Tool (L)">
          <i class="fas fa-slash"></i>
        </button>
        <button class="tool-btn tooltip" data-tool="circle" data-tooltip="Circle Tool (C)">
          <i class="far fa-circle"></i>
        </button>
        <button class="tool-btn tooltip" data-tool="rect" data-tooltip="Rectangle Tool (R)">
          <i class="far fa-square"></i>
        </button>
        <button class="tool-btn tooltip" data-tool="polygon" data-tooltip="Polygon Tool (P)">
          <i class="fas fa-draw-polygon"></i>
        </button>
        <button class="tool-btn tooltip" data-tool="eraser" data-tooltip="Eraser Tool (E)">
          <i class="fas fa-eraser"></i>
        </button>
        
        <div class="tool-separator"></div>
        <div class="tool-group-title">PCB Tools</div>
        <button class="tool-btn tooltip" data-tool="trace" data-tooltip="Trace Tool (T)">
          <i class="fas fa-route"></i>
        </button>
        <button class="tool-btn tooltip pro" data-tool="pad" data-tooltip="Pad Tool">
          <i class="fas fa-dot-circle"></i>
        </button>
        <button class="tool-btn tooltip pro" data-tool="via" data-tooltip="Via Tool">
          <i class="fas fa-circle-notch"></i>
        </button>
        <button class="tool-btn tooltip pro" data-tool="component" data-tooltip="Component Tool">
          <i class="fas fa-microchip"></i>
        </button>
        
        <div class="tool-separator"></div>
        <div class="tool-group-title">Touch Sensors</div>
        <button class="tool-btn tooltip" data-tool="touch-pad" data-tooltip="Touch Pad">
          <i class="fas fa-square"></i>
        </button>
        <button class="tool-btn tooltip" data-tool="touch-slider" data-tooltip="Touch Slider">
          <i class="fas fa-sliders-h"></i>
        </button>
        <button class="tool-btn tooltip pro" data-tool="touch-wheel" data-tooltip="Touch Wheel">
          <i class="fas fa-circle"></i>
        </button>
        <button class="tool-btn tooltip pro" data-tool="electrode" data-tooltip="Custom Electrode">
          <i class="fas fa-fingerprint"></i>
        </button>
        
        <div class="tool-separator"></div>
        <div class="tool-group-title">Utilities</div>
        <button class="tool-btn tooltip" data-tool="fill" data-tooltip="Fill Tool (F)">
          <i class="fas fa-fill-drip"></i>
        </button>
        <button class="tool-btn tooltip" data-tool="eyedropper" data-tooltip="Color Picker (I)">
          <i class="fas fa-eye-dropper"></i>
        </button>
        <button class="tool-btn tooltip" data-tool="text" data-tooltip="Text Tool (T)">
          <i class="fas fa-font"></i>
        </button>
        <button class="tool-btn tooltip" data-tool="measure" data-tooltip="Measure Tool (M)">
          <i class="fas fa-ruler"></i>
        </button>
        
        <div class="tool-separator"></div>
        <div class="tool-group-title">Actions</div>
        <button class="tool-btn tooltip" id="layer-manager" data-tooltip="Layer Manager (L)">
          <i class="fas fa-layer-group"></i>
        </button>
        <button class="tool-btn tooltip" id="clear-canvas" data-tooltip="Clear Canvas">
          <i class="fas fa-trash-alt"></i>
        </button>
        <button class="tool-btn tooltip" id="save-btn" data-tooltip="Save/Export">
          <i class="fas fa-download"></i>
        </button>
      </div>
    </div>
    
    <div class="main-area">
      <div class="canvas-container">
        <div class="canvas-bg">
          <div class="grid-pattern"></div>
        </div>
        <div class="rulers">
          <div class="ruler-corner"></div>
          <div class="ruler-h">
            <div class="ruler-h-marks"></div>
          </div>
          <div class="ruler-v">
            <div class="ruler-v-marks"></div>
          </div>
        </div>
        <div class="canvas-wrapper">
          <canvas id="canvas" width="800" height="800"></canvas>
          <canvas class="canvas-overlay" width="800" height="800"></canvas>
        </div>
        <div class="canvas-controls">
          <div class="zoom-controls">
            <button id="zoom-out" class="zoom-btn"><i class="fas fa-search-minus"></i></button>
            <span id="zoom-level">100%</span>
            <button id="zoom-in" class="zoom-btn"><i class="fas fa-search-plus"></i></button>
            <button id="zoom-fit" class="zoom-btn"><i class="fas fa-expand"></i></button>
          </div>
        </div>
      </div>
      
      <div class="settings-panel">
        <div class="settings-tabs">
          <div class="settings-tab active" data-tab="design">Design</div>
          <div class="settings-tab" data-tab="layers">Layers</div>
          <div class="settings-tab" data-tab="properties">Properties</div>
          <div class="settings-tab" data-tab="templates">Templates</div>
        </div>
        
        <div class="settings-content">
          <!-- Design Tab -->
          <div class="tab-content active" id="design-tab">
            <div class="panel-section">
              <div class="panel-title">
                <div><i class="fas fa-palette"></i> Color</div>
                <div class="panel-actions">
                  <button class="panel-collapse-btn"><i class="fas fa-chevron-up"></i></button>
                </div>
              </div>
              <div class="color-picker">
                <div class="color-option active" style="background-color: #000000;" data-color="#000000"></div>
                <div class="color-option" style="background-color: #ffffff;" data-color="#ffffff"></div>
                <div class="color-option" style="background-color: #ff0000;" data-color="#ff0000"></div>
                <div class="color-option" style="background-color: #ff9900;" data-color="#ff9900"></div>
                <div class="color-option" style="background-color: #ffff00;" data-color="#ffff00"></div>
                <div class="color-option" style="background-color: #00ff00;" data-color="#00ff00"></div>
                <div class="color-option" style="background-color: #00ffff;" data-color="#00ffff"></div>
                <div class="color-option" style="background-color: #0000ff;" data-color="#0000ff"></div>
                <div class="color-option" style="background-color: #9900ff;" data-color="#9900ff"></div>
                <div class="color-option" style="background-color: #ff00ff;" data-color="#ff00ff"></div>
              </div>
              
              <!-- PCB Specific Colors -->
              <div class="pcb-colors">
                <div class="color-option" style="background-color: #417e5a;" data-color="#417e5a" title="Solder Mask"></div>
                <div class="color-option" style="background-color: #cd9575;" data-color="#cd9575" title="Copper"></div>
                <div class="color-option" style="background-color: #e0e0e0;" data-color="#e0e0e0" title="Silkscreen"></div>
                <div class="color-option" style="background-color: #333333;" data-color="#333333" title="Carbon"></div>
              </div>
              
              <div class="custom-color">
                <input type="color" id="color-picker" value="#000000">
                <div class="opacity-control">
                  <label>Opacity:</label>
                  <input type="range" id="opacity" min="0" max="1" step="0.01" value="1">
                  <span class="opacity-value">100%</span>
                </div>
              </div>
              
              <div class="gradient-control">
                <div class="toggle-wrapper">
                  <label>Use Gradient</label>
                  <label class="toggle-switch">
                    <input type="checkbox" id="use-gradient">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div id="gradient-options" style="display: none; margin-top: 10px;">
                  <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                    <input type="color" id="gradient-color-1" value="#000000" style="flex: 1;">
                    <input type="color" id="gradient-color-2" value="#4361ee" style="flex: 1;">
                  </div>
                  <select id="gradient-type" style="margin-bottom: 10px;">
                    <option value="linear">Linear Gradient</option>
                    <option value="radial">Radial Gradient</option>
                  </select>
                  <div id="gradient-angle-control" style="display: flex; align-items: center; gap: 10px;">
                    <label>Angle:</label>
                    <input type="range" id="gradient-angle" min="0" max="360" value="90">
                    <span id="gradient-angle-value">90°</span>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="panel-section">
              <div class="panel-title">
                <div><i class="fas fa-star-of-life"></i> Symmetry</div>
                <div class="panel-actions">
                  <button class="panel-collapse-btn"><i class="fas fa-chevron-up"></i></button>
                </div>
              </div>
              <div class="panel-subtitle">Create perfectly balanced designs with symmetry tools</div>
              
              <div class="symmetry-types">
                <div class="symmetry-type active" data-type="radial">Radial</div>
                <div class="symmetry-type" data-type="mirror">Mirror</div>
                <div class="symmetry-type" data-type="kaleidoscope">Kaleidoscope</div>
                <div class="symmetry-type" data-type="mandala">Mandala</div>
              </div>
              
              <div class="control-group">
                <label>Symmetry Count: <span id="symmetry-value">6</span></label>
                <input type="range" id="symmetry" min="1" max="36" value="6">
              </div>
              
              <div class="control-group" id="rotation-control">
                <label>Rotation: <span id="rotation-value">0°</span></label>
                <input type="range" id="rotation" min="0" max="360" value="0">
              </div>
              
              <div class="control-group" id="offset-control">
                <label>Offset: <span id="offset-value">0</span>px</label>
                <input type="range" id="offset" min="0" max="100" value="0">
              </div>
              
              <div class="toggle-wrapper">
                <label>Show Symmetry Guide</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="show-guide">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div class="toggle-wrapper">
                <label>Center at Mouse Position</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="dynamic-center">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div class="toggle-wrapper">
                <label>Auto-complete Shapes</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="auto-complete">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div class="preset-symmetry">
                <label>Presets:</label>
                <div class="preset-buttons">
                  <button class="preset-btn" data-preset="tri-sym">Triangle</button>
                  <button class="preset-btn" data-preset="quad-sym">Square</button>
                  <button class="preset-btn" data-preset="hex-sym">Hexagon</button>
                  <button class="preset-btn" data-preset="oct-sym">Octagon</button>
                </div>
              </div>
            </div>
            
            <div class="panel-section">
              <div class="panel-title">
                <div><i class="fas fa-paint-brush"></i> Brush Settings</div>
                <div class="panel-actions">
                  <button class="panel-collapse-btn"><i class="fas fa-chevron-up"></i></button>
                </div>
              </div>
              
              <div class="brush-presets">
                <label>Brush Type:</label>
                <div class="brush-preset-container">
                  <div class="brush-preset active" data-brush="standard">
                    <div class="brush-preview-icon" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 40 40\'%3E%3Ccircle cx=\'20\' cy=\'20\' r=\'10\' fill=\'%23fff\'/%3E%3C/svg%3E');"></div>
                    <span>Standard</span>
                  </div>
                  <div class="brush-preset" data-brush="airbrush">
                    <div class="brush-preview-icon" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 40 40\'%3E%3Ccircle cx=\'20\' cy=\'20\' r=\'15\' fill=\'%23fff\' fill-opacity=\'0.5\'/%3E%3C/svg%3E');"></div>
                    <span>Airbrush</span>
                  </div>
                  <div class="brush-preset" data-brush="calligraphy">
                    <div class="brush-preview-icon" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 40 40\'%3E%3Cellipse cx=\'20\' cy=\'20\' rx=\'15\' ry=\'5\' fill=\'%23fff\' transform=\'rotate(45, 20, 20)\'/%3E%3C/svg%3E');"></div>
                    <span>Calligraphy</span>
                  </div>
                  <div class="brush-preset" data-brush="circuit">
                    <div class="brush-preview-icon" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 40 40\'%3E%3Crect x=\'10\' y=\'10\' width=\'20\' height=\'20\' fill=\'%23fff\'/%3E%3C/svg%3E');"></div>
                    <span>Circuit</span>
                  </div>
                </div>
              </div>
              
              <div class="control-group">
                <label>Size: <span id="size-value">2</span>px</label>
                <div style="display: flex; align-items: center;">
                  <input type="range" id="weight" min="1" max="100" value="2">
                  <div class="brush-preview">
                    <div class="brush-dot" style="width: 2px; height: 2px;"></div>
                  </div>
                </div>
              </div>
              
              <div class="control-group">
                <label>Hardness: <span id="hardness-value">100</span>%</label>
                <input type="range" id="hardness" min="0" max="100" value="100">
              </div>
              
              <div class="control-group">
                <label>Flow: <span id="flow-value">100</span>%</label>
                <input type="range" id="flow" min="10" max="100" value="100">
              </div>
              
              <div class="control-group">
                <label>Style:</label>
                <select id="strokeCap">
                  <option value="round">Round</option>
                  <option value="square">Square</option>
                  <option value="butt">Flat</option>
                </select>
              </div>
              
              <div class="control-group">
                <label>Stroke Type:</label>
                <select id="strokeType">
                  <option value="solid">Solid</option>
                  <option value="dashed">Dashed</option>
                  <option value="dotted">Dotted</option>
                  <option value="double">Double Line</option>
                  <option value="wavy">Wavy</option>
                  <option value="custom">Custom Pattern</option>
                </select>
                <div class="stroke-preview">
                  <div class="stroke-line" style="width: 80%;"></div>
                </div>
              </div>
              
              <div id="custom-stroke-pattern" class="control-group" style="display: none;">
                <label>Custom Pattern:</label>
                <input type="text" id="dash-pattern" placeholder="5,5,1,5" style="width: 100%; padding: 8px; background: #2d3748; border: none; color: white; border-radius: 4px;">
                <div class="stroke-help" style="margin-top: 5px; font-size: 11px; color: var(--secondary-text);">
                  Format: dash,gap,dash,gap (in pixels)
                </div>
              </div>
              
              <div class="toggle-wrapper">
                <label>Pressure Sensitivity</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="pressure-sensitivity">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div class="toggle-wrapper">
                <label>Smooth Stroke</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="autoSmooth" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
            
            <div class="panel-section">
              <div class="panel-title">
                <div><i class="fas fa-sliders-h"></i> Effects</div>
                <div class="panel-actions">
                  <button class="panel-collapse-btn"><i class="fas fa-chevron-up"></i></button>
                </div>
              </div>
              
              <div class="toggle-wrapper">
                <label>Shadow Effect</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="shadow-effect">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div id="shadow-controls" style="display: none; margin-top: 10px;">
                <div class="control-group">
                  <label>Shadow Blur: <span id="shadow-blur-value">5</span>px</label>
                  <input type="range" id="shadow-blur" min="0" max="20" value="5">
                </div>
                <div class="control-group">
                  <label>Shadow Offset: <span id="shadow-offset-value">3</span>px</label>
                  <input type="range" id="shadow-offset" min="0" max="20" value="3">
                </div>
                <div class="control-group">
                  <label>Shadow Color:</label>
                  <input type="color" id="shadow-color" value="#000000" style="width: 100%;">
                </div>
              </div>
              
              <div class="control-group">
                <label>Fill Pattern:</label>
                <div class="pattern-options">
                  <div class="pattern-option active" data-pattern="none">
                    <div style="width: 100%; height: 100%; background: transparent;"></div>
                  </div>
                  <div class="pattern-option" data-pattern="dots">
                    <div class="pattern-dots"></div>
                  </div>
                  <div class="pattern-option" data-pattern="lines">
                    <div class="pattern-lines"></div>
                  </div>
                  <div class="pattern-option" data-pattern="zigzag">
                    <div class="pattern-zigzag"></div>
                  </div>
                  <div class="pattern-option" data-pattern="grid">
                    <div style="width: 100%; height: 100%; background-image: linear-gradient(white 1px, transparent 1px), linear-gradient(90deg, white 1px, transparent 1px); background-size: 5px 5px;"></div>
                  </div>
                  <div class="pattern-option" data-pattern="crosshatch">
                    <div style="width: 100%; height: 100%; background-image: linear-gradient(45deg, white 25%, transparent 25%, transparent 75%, white 75%), linear-gradient(135deg, white 25%, transparent 25%, transparent 75%, white 75%); background-size: 6px 6px;"></div>
                  </div>
                  <div class="pattern-option pro" data-pattern="circuit">
                    <div style="width: 100%; height: 100%; position: relative; overflow: hidden;">
                      <div style="position: absolute; top: 5px; left: 5px; width: 30px; height: 30px; border: 1px solid white; border-radius: 2px;"></div>
                      <div style="position: absolute; top: 20px; left: 20px; width: 15px; height: 15px; background: white; border-radius: 50%;"></div>
                    </div>
                  </div>
                  <div class="pattern-option pro" data-pattern="custom">
                    <div style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; font-size: 18px; color: white;">
                      <i class="fas fa-plus"></i>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="control-group" id="pattern-scale-control" style="display: none;">
                <label>Pattern Scale: <span id="pattern-scale-value">1</span>x</label>
                <input type="range" id="pattern-scale" min="0.5" max="5" step="0.1" value="1">
              </div>
              
              <div class="control-group">
                <label>Blend Mode:</label>
                <select id="blend-mode">
                  <option value="source-over">Normal</option>
                  <option value="multiply">Multiply</option>
                  <option value="screen">Screen</option>
                  <option value="overlay">Overlay</option>
                  <option value="darken">Darken</option>
                  <option value="lighten">Lighten</option>
                  <option value="color-dodge">Color Dodge</option>
                  <option value="color-burn">Color Burn</option>
                  <option value="hard-light">Hard Light</option>
                  <option value="soft-light">Soft Light</option>
                  <option value="difference">Difference</option>
                  <option value="exclusion">Exclusion</option>
                </select>
              </div>
              
              <div class="filter-effects">
                <label>Filters:</label>
                <div class="filter-buttons">
                  <button class="filter-btn active" data-filter="none">None</button>
                  <button class="filter-btn" data-filter="invert">Invert</button>
                  <button class="filter-btn" data-filter="grayscale">Grayscale</button>
                  <button class="filter-btn pro" data-filter="blur">Blur</button>
                  <button class="filter-btn pro" data-filter="sharpen">Sharpen</button>
                </div>
              </div>
            </div>
            
            <div class="panel-section">
              <div class="panel-title">
                <div><i class="fas fa-cog"></i> Technical Settings</div>
                <div class="panel-actions">
                  <button class="panel-collapse-btn"><i class="fas fa-chevron-up"></i></button>
                </div>
              </div>
              
              <div class="panel-subtitle">Fine-tune for PCB and touch sensor design</div>
              
              <div class="control-group">
                <label>Snap to Grid:</label>
                <div style="display: flex; align-items: center; gap: 10px;">
                  <label class="toggle-switch">
                    <input type="checkbox" id="snap-to-grid">
                    <span class="toggle-slider"></span>
                  </label>
                  <select id="grid-size" style="flex: 1;">
                    <option value="5">5px</option>
                    <option value="10">10px</option>
                    <option value="20">20px</option>
                    <option value="25">25px</option>
                    <option value="50">50px</option>
                    <option value="custom">Custom...</option>
                  </select>
                </div>
              </div>
              
              <div class="toggle-wrapper">
                <label>Show Measurements</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="show-measurements">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div class="toggle-wrapper">
                <label>Show Rulers</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="show-rulers">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div class="control-group">
                <label>Units:</label>
                <select id="unit-type">
                  <option value="px">Pixels (px)</option>
                  <option value="mm">Millimeters (mm)</option>
                  <option value="in">Inches (in)</option>
                  <option value="mil">Mils (1/1000 in)</option>
                </select>
              </div>
              
              <div class="control-group">
                <label>Scale: 1px = <span id="scale-value">1</span> <span id="scale-unit">px</span></label>
                <input type="range" id="scale" min="0.1" max="10" step="0.1" value="1">
              </div>
              
              <div class="control-group">
                <label>Background:</label>
                <select id="background-type">
                  <option value="white">White</option>
                  <option value="transparent">Transparent</option>
                  <option value="grid">Grid</option>
                  <option value="dots">Dots</option>
                  <option value="pcb-green">PCB Green</option>
                  <option value="pcb-blue">PCB Blue</option>
                  <option value="pcb-black">PCB Black</option>
                  <option value="custom">Custom Color</option>
                </select>
              </div>
              
              <div id="custom-bg-color" style="display: none; margin-top: 10px;">
                <input type="color" id="bg-color-picker" value="#ffffff" style="width: 100%;">
              </div>
            </div>
            
            <!-- Capacitive Touch Design Section -->
            <div class="panel-section">
              <div class="panel-title">
                <div><i class="fas fa-fingerprint"></i> Touch Sensor Settings</div>
                <div class="panel-actions">
                  <button class="panel-collapse-btn"><i class="fas fa-chevron-up"></i></button>
                </div>
              </div>
              
              <div class="panel-subtitle">Design parameters for capacitive sensors</div>
              
              <div class="control-group">
                <label>Electrode Type:</label>
                <select id="electrode-type">
                  <option value="pad">Touch Pad</option>
                  <option value="slider">Linear Slider</option>
                  <option value="wheel">Radial Wheel</option>
                  <option value="button">Button</option>
                  <option value="custom">Custom Shape</option>
                </select>
              </div>
              
              <div class="control-group">
                <label>Trace Width: <span id="trace-width-value">5</span>px</label>
                <input type="range" id="trace-width" min="1" max="50" value="5">
              </div>
              
              <div class="control-group">
                <label>Pad Size: <span id="pad-size-value">20</span>px</label>
                <input type="range" id="pad-size" min="5" max="100" value="20">
              </div>
              
              <div class="control-group">
                <label>Pad Spacing: <span id="pad-spacing-value">5</span>px</label>
                <input type="range" id="pad-spacing" min="0" max="50" value="5">
              </div>
              
              <div class="toggle-wrapper">
                <label>Show Sensitivity Map</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="show-sensitivity">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div class="toggle-wrapper">
                <label>Auto-route Traces</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="auto-route">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div class="sensor-templates">
                <label>Templates:</label>
                <div class="template-buttons">
                  <button class="template-btn" data-template="3x3-pad">3×3 Matrix</button>
                  <button class="template-btn" data-template="slider-5">5-Segment Slider</button>
                  <button class="template-btn" data-template="wheel-8">8-Segment Wheel</button>
                  <button class="template-btn pro" data-template="custom">Custom</button>
                </div>
              </div>
            </div>
            
            <!-- Export/Actions Section -->
            <div class="panel-section">
              <div class="panel-title">
                <div><i class="fas fa-save"></i> Export & Share</div>
                <div class="panel-actions">
                  <button class="panel-collapse-btn"><i class="fas fa-chevron-up"></i></button>
                </div>
              </div>
              
              <div class="export-options">
                <label>Image Export:</label>
                <div class="btn-group">
                  <button class="btn" id="export-png">PNG</button>
                  <button class="btn" id="export-jpg">JPG</button>
                  <button class="btn btn-secondary" id="export-svg">SVG</button>
                </div>
              </div>
              
              <div class="export-options" style="margin-top: 15px;">
                <label>Technical Export:</label>
                <div class="btn-group">
                  <button class="btn btn-secondary pro" id="export-gerber">Gerber</button>
                  <button class="btn btn-secondary pro" id="export-dxf">DXF/CAD</button>
                  <button class="btn btn-secondary" id="export-pdf">PDF</button>
                </div>
              </div>
              
              <div class="control-group" style="margin-top: 15px;">
                <label>Resolution:</label>
                <select id="export-resolution">
                  <option value="1">1× (800×800)</option>
                  <option value="2" selected>2× (1600×1600)</option>
                  <option value="4">4× (3200×3200)</option>
                  <option value="custom">Custom Size...</option>
                </select>
              </div>
              
              <div class="save-project" style="margin-top: 15px;">
                <button class="btn" id="save-project" style="width: 100%;">
                  <i class="fas fa-save"></i> Save Project
                </button>
              </div>
              
              <div class="open-project" style="margin-top: 10px;">
                <button class="btn btn-secondary" id="open-project" style="width: 100%;">
                  <i class="fas fa-folder-open"></i> Open Project
                </button>
              </div>
            </div>
          </div>
          
          <!-- Layers Tab Content -->
          <div class="tab-content" id="layers-tab">
            <div class="panel-section">
              <div class="panel-title">
                <div><i class="fas fa-layer-group"></i> Layers</div>
                <div class="panel-actions">
                  <button class="btn btn-secondary" id="add-layer" style="padding: 2px 8px; font-size: 12px;">
                    <i class="fas fa-plus"></i> Add
                  </button>
                </div>
              </div>
              
              <div class="layers-list">
                <div class="layer-item active">
                  <div class="layer-visibility">
                    <i class="fas fa-eye"></i>
                  </div>
                  <div class="layer-preview" style="background-color: #417e5a;"></div>
                  <div class="layer-name">Top Copper</div>
                  <div class="layer-options">
                    <i class="fas fa-ellipsis-v"></i>
                  </div>
                </div>
                
                <div class="layer-item">
                  <div class="layer-visibility">
                    <i class="fas fa-eye"></i>
                  </div>
                  <div class="layer-preview" style="background-color: #e0e0e0;"></div>
                  <div class="layer-name">Silkscreen</div>
                  <div class="layer-options">
                    <i class="fas fa-ellipsis-v"></i>
                  </div>
                </div>
                
                <div class="layer-item">
                  <div class="layer-visibility">
                    <i class="fas fa-eye-slash" style="opacity: 0.5;"></i>
                  </div>
                  <div class="layer-preview" style="background-color: #cd9575;"></div>
                  <div class="layer-name">Bottom Copper</div>
                  <div class="layer-options">
                    <i class="fas fa-ellipsis-v"></i>
                  </div>
                </div>
                
                <div class="layer-item">
                  <div class="layer-visibility">
                    <i class="fas fa-eye"></i>
                  </div>
                  <div class="layer-preview" style="background-color: #333333;"></div>
                  <div class="layer-name">Carbon</div>
                  <div class="layer-options">
                    <i class="fas fa-ellipsis-v"></i>
                  </div>
                </div>
              </div>
              
              <div class="layer-properties">
                <div class="control-group">
                  <label>Opacity: <span id="layer-opacity-value">100</span>%</label>
                  <input type="range" id="layer-opacity" min="0" max="100" value="100">
                </div>
                
                <div class="control-group">
                  <label>Blend Mode:</label>
                  <select id="layer-blend-mode">
                    <option value="normal">Normal</option>
                    <option value="multiply">Multiply</option>
                    <option value="screen">Screen</option>
                    <option value="overlay">Overlay</option>
                  </select>
                </div>
                
                <div class="btn-group" style="margin-top: 15px;">
                  <button class="btn btn-secondary" id="merge-layers">Merge Down</button>
                  <button class="btn btn-secondary" id="duplicate-layer">Duplicate</button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Properties Tab Content -->
          <div class="tab-content" id="properties-tab">
            <div class="panel-section">
              <div class="panel-title">
                <div><i class="fas fa-info-circle"></i> Canvas Properties</div>
              </div>
              
              <div class="property-row">
                <div class="property-label">Canvas Size:</div>
                <div class="property-value">
                  <div style="display: flex; gap: 5px;">
                    <input type="number" id="canvas-width" value="800" min="100" max="5000" style="width: 60px; padding: 5px; background: #2d3748; border: none; color: white; border-radius: 4px;">
                    <span style="line-height: 28px;">×</span>
                    <input type="number" id="canvas-height" value="800" min="100" max="5000" style="width: 60px; padding: 5px; background: #2d3748; border: none; color: white; border-radius: 4px;">
                    <button class="btn btn-secondary" id="resize-canvas" style="padding: 5px 8px; font-size: 12px;">Apply</button>
                  </div>
                </div>
              </div>
              
              <div class="property-row">
                <div class="property-label">Project Name:</div>
                <div class="property-value">
                  <input type="text" id="project-name" value="Untitled Design" style="width: 100%; padding: 5px; background: #2d3748; border: none; color: white; border-radius: 4px;">
                </div>
              </div>
              
              <div class="property-row">
                <div class="property-label">Precision:</div>
                <div class="property-value">
                  <select id="precision-level">
                    <option value="1">Normal (1x)</option>
                    <option value="2">High (2x)</option>
                    <option value="4">Ultra (4x)</option>
                  </select>
                </div>
              </div>
              
              <div class="property-row">
                <div class="property-label">Color Profile:</div>
                <div class="property-value">
                  <select id="color-profile">
                    <option value="rgb">RGB</option>
                    <option value="cmyk">CMYK</option>
                    <option value="grayscale">Grayscale</option>
                  </select>
                </div>
              </div>
              
              <div class="toggle-wrapper">
                <label>Anti-aliasing</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="anti-aliasing" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div class="toggle-wrapper">
                <label>Auto-save</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="auto-save">
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
            
            <div class="panel-section">
              <div class="panel-title">
                <div><i class="fas fa-ruler-combined"></i> PCB Parameters</div>
              </div>
              
              <div class="pcb-properties">
                <div class="property-row">
                  <div class="property-label">Board Type:</div>
                  <div class="property-value">
                    <select id="board-type">
                      <option value="single">Single-sided</option>
                      <option value="double">Double-sided</option>
                      <option value="multi">Multi-layer</option>
                    </select>
                  </div>
                </div>
                
                <div class="property-row">
                  <div class="property-label">Copper Weight:</div>
                  <div class="property-value">
                    <select id="copper-weight">
                      <option value="1oz">1oz (35µm)</option>
                      <option value="2oz">2oz (70µm)</option>
                      <option value="3oz">3oz (105µm)</option>
                    </select>
                  </div>
                </div>
                
                <div class="property-row">
                  <div class="property-label">Min Trace Width:</div>
                  <div class="property-value">
                    <select id="min-trace-width">
                      <option value="6">6mil (0.15mm)</option>
                      <option value="8">8mil (0.2mm)</option>
                      <option value="10">10mil (0.25mm)</option>
                    </select>
                  </div>
                </div>
                
                <div class="property-row">
                  <div class="property-label">Min Clearance:</div>
                  <div class="property-value">
                    <select id="min-clearance">
                      <option value="6">6mil (0.15mm)</option>
                      <option value="8">8mil (0.2mm)</option>
                      <option value="10">10mil (0.25mm)</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Templates Tab Content -->
          <div class="tab-content" id="templates-tab">
            <div class="panel-section">
              <div class="panel-title">
                <div><i class="fas fa-shapes"></i> Design Templates</div>
              </div>
              
              <div class="templates-grid">
                <div class="template-category">
                  <h4>Touch Sensors</h4>
                  <div class="template-items">
                    <div class="template-item">
                      <div class="template-preview" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\' width=\'100\' height=\'100\'%3E%3Crect x=\'10\' y=\'10\' width=\'80\' height=\'80\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Ccircle cx=\'30\' cy=\'30\' r=\'15\' fill=\'white\' fill-opacity=\'0.5\'/%3E%3Ccircle cx=\'70\' cy=\'30\' r=\'15\' fill=\'white\' fill-opacity=\'0.5\'/%3E%3Ccircle cx=\'30\' cy=\'70\' r=\'15\' fill=\'white\' fill-opacity=\'0.5\'/%3E%3Ccircle cx=\'70\' cy=\'70\' r=\'15\' fill=\'white\' fill-opacity=\'0.5\'/%3E%3C/svg%3E');"></div>
                      <div class="template-name">4-Button Pad</div>
                    </div>
                    <div class="template-item">
                      <div class="template-preview" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\' width=\'100\' height=\'100\'%3E%3Cpath d=\'M50,10 L90,50 L50,90 L10,50 Z\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cpath d=\'M50,20 L80,50 L50,80 L20,50 Z\' fill=\'white\' fill-opacity=\'0.2\'/%3E%3Cpath d=\'M50,30 L70,50 L50,70 L30,50 Z\' fill=\'white\' fill-opacity=\'0.4\'/%3E%3C/svg%3E');"></div>
                      <div class="template-name">Touch Wheel</div>
                    </div>
                    <div class="template-item">
                      <div class="template-preview" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\' width=\'100\' height=\'100\'%3E%3Crect x=\'10\' y=\'40\' width=\'80\' height=\'20\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Crect x=\'15\' y=\'45\' width=\'10\' height=\'10\' fill=\'white\' fill-opacity=\'0.5\'/%3E%3Crect x=\'35\' y=\'45\' width=\'10\' height=\'10\' fill=\'white\' fill-opacity=\'0.5\'/%3E%3Crect x=\'55\' y=\'45\' width=\'10\' height=\'10\' fill=\'white\' fill-opacity=\'0.5\'/%3E%3Crect x=\'75\' y=\'45\' width=\'10\' height=\'10\' fill=\'white\' fill-opacity=\'0.5\'/%3E%3C/svg%3E');"></div>
                      <div class="template-name">Slider Bar</div>
                    </div>
                    <div class="template-item pro">
                      <div class="template-preview" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\' width=\'100\' height=\'100\'%3E%3Crect x=\'10\' y=\'10\' width=\'80\' height=\'80\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'30\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cpath d=\'M30,30 L70,70 M30,70 L70,30\' stroke=\'white\' stroke-width=\'2\'/%3E%3C/svg%3E');"></div>
                      <div class="template-name">Trackpad</div>
                      <div class="pro-badge">PRO</div>
                    </div>
                  </div>
                </div>
                
                <div class="template-category">
                  <h4>PCB Components</h4>
                  <div class="template-items">
                    <div class="template-item">
                      <div class="template-preview" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\' width=\'100\' height=\'100\'%3E%3Crect x=\'30\' y=\'20\' width=\'40\' height=\'60\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cline x1=\'50\' y1=\'20\' x2=\'50\' y2=\'10\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cline x1=\'50\' y1=\'80\' x2=\'50\' y2=\'90\' stroke=\'white\' stroke-width=\'2\'/%3E%3C/svg%3E');"></div>
                      <div class="template-name">Resistor</div>
                    </div>
                    <div class="template-item">
                      <div class="template-preview" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\' width=\'100\' height=\'100\'%3E%3Crect x=\'25\' y=\'30\' width=\'50\' height=\'40\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cline x1=\'25\' y1=\'50\' x2=\'10\' y2=\'50\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cline x1=\'75\' y1=\'50\' x2=\'90\' y2=\'50\' stroke=\'white\' stroke-width=\'2\'/%3E%3Crect x=\'35\' y=\'40\' width=\'30\' height=\'5\' fill=\'white\' fill-opacity=\'0.5\'/%3E%3Crect x=\'35\' y=\'55\' width=\'30\' height=\'5\' fill=\'white\' fill-opacity=\'0.5\'/%3E%3C/svg%3E');"></div>
                      <div class="template-name">Capacitor</div>
                    </div>
                    <div class="template-item">
                      <div class="template-preview" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\' width=\'100\' height=\'100\'%3E%3Crect x=\'30\' y=\'30\' width=\'40\' height=\'40\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Ccircle cx=\'20\' cy=\'30\' r=\'5\' fill=\'white\'/%3E%3Ccircle cx=\'20\' cy=\'70\' r=\'5\' fill=\'white\'/%3E%3Ccircle cx=\'80\' cy=\'30\' r=\'5\' fill=\'white\'/%3E%3Ccircle cx=\'80\' cy=\'70\' r=\'5\' fill=\'white\'/%3E%3Cline x1=\'20\' y1=\'30\' x2=\'30\' y2=\'30\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cline x1=\'20\' y1=\'70\' x2=\'30\' y2=\'70\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cline x1=\'70\' y1=\'30\' x2=\'80\' y2=\'30\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cline x1=\'70\' y1=\'70\' x2=\'80\' y2=\'70\' stroke=\'white\' stroke-width=\'2\'/%3E%3C/svg%3E');"></div>
                      <div class="template-name">IC Package</div>
                    </div>
                    <div class="template-item pro">
                      <div class="template-preview" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\' width=\'100\' height=\'100\'%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'30\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'10\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cline x1=\'50\' y1=\'20\' x2=\'50\' y2=\'10\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cline x1=\'50\' y1=\'80\' x2=\'50\' y2=\'90\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cline x1=\'20\' y1=\'50\' x2=\'10\' y2=\'50\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cline x1=\'80\' y1=\'50\' x2=\'90\' y2=\'50\' stroke=\'white\' stroke-width=\'2\'/%3E%3C/svg%3E');"></div>
                      <div class="template-name">Microcontroller</div>
                      <div class="pro-badge">PRO</div>
                    </div>
                  </div>
                </div>
                
                <div class="template-category">
                  <h4>Enclosure Patterns</h4>
                  <div class="template-items">
                    <div class="template-item">
                      <div class="template-preview" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\' width=\'100\' height=\'100\'%3E%3Crect x=\'10\' y=\'10\' width=\'80\' height=\'80\' fill=\'none\' stroke=\'white\' stroke-width=\'2\' rx=\'5\' ry=\'5\'/%3E%3Ccircle cx=\'20\' cy=\'20\' r=\'5\' fill=\'white\'/%3E%3Ccircle cx=\'20\' cy=\'80\' r=\'5\' fill=\'white\'/%3E%3Ccircle cx=\'80\' cy=\'20\' r=\'5\' fill=\'white\'/%3E%3Ccircle cx=\'80\' cy=\'80\' r=\'5\' fill=\'white\'/%3E%3C/svg%3E');"></div>
                      <div class="template-name">Box Panel</div>
                    </div>
                    <div class="template-item">
                      <div class="template-preview" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\' width=\'100\' height=\'100\'%3E%3Cpath d=\'M20,20 L80,20 L80,80 L20,80 Z\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cpath d=\'M30,30 L70,30 L70,70 L30,70 Z\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cpath d=\'M20,20 L30,30 M80,20 L70,30 M20,80 L30,70 M80,80 L70,70\' stroke=\'white\' stroke-width=\'2\'/%3E%3C/svg%3E');"></div>
                      <div class="template-name">Display Cutout</div>
                    </div>
                    <div class="template-item">
                      <div class="template-preview" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\' width=\'100\' height=\'100\'%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'40\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'35\' fill=\'none\' stroke=\'white\' stroke-width=\'1\' stroke-dasharray=\'5,5\'/%3E%3Ccircle cx=\'30\' cy=\'30\' r=\'5\' fill=\'white\'/%3E%3Ccircle cx=\'70\' cy=\'30\' r=\'5\' fill=\'white\'/%3E%3Ccircle cx=\'30\' cy=\'70\' r=\'5\' fill=\'white\'/%3E%3Ccircle cx=\'70\' cy=\'70\' r=\'5\' fill=\'white\'/%3E%3C/svg%3E');"></div>
                      <div class="template-name">Circular Panel</div>
                    </div>
                    <div class="template-item pro">
                      <div class="template-preview" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\' width=\'100\' height=\'100\'%3E%3Cpath d=\'M20,30 L80,30 L80,80 L20,80 Z\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/%3E%3Cpath d=\'M30,30 L30,20 L70,20 L70,30\' stroke=\'white\' stroke-width=\'2\' fill=\'none\'/%3E%3Crect x=\'30\' y=\'40\' width=\'40\' height=\'10\' fill=\'white\' fill-opacity=\'0.3\'/%3E%3Crect x=\'30\' y=\'60\' width=\'40\' height=\'10\' fill=\'white\' fill-opacity=\'0.3\'/%3E%3C/svg%3E');"></div>
                      <div class="template-name">Custom Case</div>
                      <div class="pro-badge">PRO</div>
                    </div>
                  </div>
                </div>
              </div>
            